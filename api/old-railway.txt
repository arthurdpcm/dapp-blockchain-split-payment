[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
runtime = "V2"
startCommand = "uvicorn main:app --bind \"[::]:8000\"
healthcheckPath = "/health"
healthcheckTimeout = 300 # Aumenta o tempo limite para 300 segundos (5 minutos)
healthcheckInterval = 10 # Espera 10 segundos entre cada tentativa
sleepApplication = false
multiRegionConfig = { "us-east4-eqdc4a" = { numReplicas = 1 } }
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[service]
internalPort = 8000
public = true